<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
        <meta name="msapplication-tap-highlight" content="no" />
        <title>Mofluid</title>
        <script type="text/javascript" src="js/header.js"></script>
		 <script type="text/javascript" src="js/mofluid_slider.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
        <script type="text/javascript" langauge="javascript">
            var app_curr_code = config.data[0].app_currency;
            var app_curr_symbol = config.data[0].app_curr_symbol;
            var order_check_arr = new Array();
            var loading = "true";
            var _top = $(window).scrollTop();
            var _direction;
            var page = 1;
            var product_count = 1;
            var allorderlistdata = 0;
            var total_orders = 0;
            var current_orders = 0;
            var pagescrolldata = 0;

            function onLoad() {
                checkLoginStatus();
                verify_session();
                displayOrder(page);
                $("#mofluid_home_a").html(locale.message.button["home"]);
                $("#mofluid_myaccount_a").html(locale.message.button["my_account"]);
                $("#mofluid_editprofile_a").html(locale.message.button["edit_profile"]);
                $("#mofluid_myorders_a").html(locale.message.button["my_orders"]);
                $("#mofluid_signout_a").html(locale.message.button["sign_out"]);
                $("#mofluid_signin_a").html(locale.message.button["sign_in"]);
                $("#searchFilter").attr("placeholder", locale.message.text["search"]);
                try {
                    var MYSTORE = JSON.parse(localStorage[config.data[0].storage_key + "_STORE"]);
                    document.title = MYSTORE["store"]["name"];
                    $("#storelabel").html(MYSTORE["store"]["name"]);
                } catch (err) {}
                getFooter();
				
				setfourBox();
			getcartitem();
            }


            /*
             *Function to implement pagination
             *@param
             *return
             */

            $(document).scroll(function() {
                var _cur_top = $(window).scrollTop();
                if (_top < _cur_top) {
                    _direction = 'down';
                    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 100) {
                        //End of page, load next content here
                        if (loading) {
                            loadNextPage();
                        }
                    }
                } else {
                    _direction = 'up';
                }
                _top = _cur_top;
                console.log(_direction);
            });

            //Load content for next page
            function loadNextPage() {
                console.error("current_orders : " + current_orders);
                console.error("total_orders : " + total_orders);

                if (current_orders < total_orders && pagescrolldata == 0) {
                    displayOrder(++page);
                }
            }

            /*
             *Function to capitalise first letter
             *@param
             *@return
             */

            function capitaliseFirstLetter(string) {
                try {
                    return string.charAt(0).toUpperCase() + string.slice(1);
                } catch (err) {
                    return string;
                }
            }

            function isInArray(value, array) {
                return array.indexOf(value) > -1;
            }

            /*
             *Function to display all orders
             *@param
             *return
             */
            function displayOrder(page) {
                $("#myorder_content").hide();
                $("#myorder_msg").show();
                loading = "false";
                var BASE_URL = config.data[0].baseurl;
                var STORE = config.data[0].storeid;
                var Session = JSON.parse(localStorage[config.data[0].storage_key + '_Session']);
                var app_curr_code = config.data[0].app_currency;
                var customerid = Session["customer_id"];
                var coupon_status = "";
                var discount_amount = "";
                var coupon_code = "";
                var shipmyid = "";
                $(".ui-loader").show();
                //---Fetch Store Details from Mofluid Magento Web Service
                console.log("" + BASE_URL + "?callback=?" + "&store=" + STORE + "&service=myorders&customerid=" + customerid + "&currentpage=" + page + "&pagesize=3" + "&currency=" + app_curr_code);
                var myorder_webservice = BASE_URL + "?callback=?" + "&store=" + STORE + "&service=myorders&customerid=" + customerid + "&currentpage=" + page + "&pagesize=10" + "&currency=" + app_curr_code;
                $.ajax({
                    url: myorder_webservice,
                    type: "get",
                    dataType: "jsonp",
                    beforeSend: function() {
                        console.log("Before Shipping Webservice");
                    },
                    error: function() {
                        if (config.data[0].platform == 'ios' || config.data[0].platform == 'Android') {
                            navigator.notification.alert(locale.message.alert["try_again"], function() {}, config.data[0].app_name, locale.message.button["close"]);
                        } else {
                            alert(locale.message.alert["try_again"])
                        }
                        console.log("Error  on Webservice");
                    },
                    complete: function() {
                        console.log("Complete Webservice");
                    },
                    success: function(response) {
                        loading = "true";
                        total_orders = response.total;
                        allorderlistdata = response.data;
                        console.log(allorderlistdata);
                        if (allorderlistdata == null) {
                            allorderlistdata = "";
                        }
                        alldatalength = allorderlistdata.length;
                        var allorderhtml = '';
                        var i = 0;
                        if (response.total) {
                            if (current_orders < total_orders) {
                                for (i = 0; i < alldatalength; i++) {
                                    current_orders++;
                                    allorderhtml += '<div class="mainorderdiv" id="mainorderdiv">\
                                            <div class="mainorderiddiv"><span id="orderdate">' + allorderlistdata[i].order_date + '</span><span id="ordeid">( OD' + allorderlistdata[i].order_id + ' )</span></div>\
                                            <div class="mainproductcoldiv" id="mainproductcoldiv">';
                                    var productidslength = allorderlistdata[i].product.id.length;
                                    var j = 0;
                                    for (j = 0; j < productidslength; j++) {
                                        allorderhtml += '<div class="mainproductcolsubdiv" id="mainproductcolsubdiv">\
                                                        <div class="mainproductcolimgdiv" id="mainproductcolimgdiv">\
                                                    <img src="' + allorderlistdata[i].product.image[j] + '" onerror="bad_image(this);"/>\
                                                </div>\
                                                <div class="mainproductcoldesdiv" id="mainproductcoldesdiv">\
                                                    <div class="mainproductcoldesname" id="mainproductcoldesname">' + allorderlistdata[i].product.name[j] + '</div>\
                                                    <div class="mainproductcoldespric mypricebold" id="mainproductcoldespeice"><span>' + app_curr_symbol + '</span>' + parseFloat(allorderlistdata[i].product.unitprice[j]).toFixed(2) + '</div>\
                                                </div>\
                                             </div>';
                                    }
                                    allorderhtml += '<div class="mainproductcolstausview" id="mainproductcolstausview">\
                                            <div class="mainproductcolstaus" id="mainproductcolstaus">\
                                                <span class="mainproductcolstauslab" id="mainproductcolstauslab">' + locale.message.text["status"] + ' : </span>\
                                                <span class="mainproductcolstausval" id="mainproductcolstausval">' + allorderlistdata[i].status + '</span>\
                                            </div>\
                                            <div class="mainproductcolview" id="mainproductcolview">\
                                                <div class="mainproductcolviewbut" id="mainproductcolviewbut" onclick="productdescription(' + allorderlistdata[i].order_id + ');">' + locale.message.text["view_details"] + '</div>\
               <div class="mainproductcolviewbut reorder" id="mainproductcolviewbut" onclick="reorderfunction(' + allorderlistdata[i].order_id + ');">' + locale.message.text["reorder"] + '</div>\
                                            </div>\
                                         </div>\
                                    </div></div>';
                                }
                            }
                        } else {
                            allorderhtml = locale.message.text["you_have_no_orders"];
                        }
                        //alert(allorderhtml);
                        $("#myorder_msg").append(allorderhtml);
                        $("#myorder_msg").trigger("create");
                        $(".ui-loader").hide();

                    }
                });

            }

            function reorderfunction(orderid) {
                $("#myorder_msg").hide();
                $(".ui-loader").show();
                localStorage[config.data[0].storage_key + '_pNames'] = "";
                localStorage[config.data[0].storage_key + '_pPrices'] = "";
                localStorage[config.data[0].storage_key + '_pImages'] = "";
                localStorage[config.data[0].storage_key + '_pSizes'] = "";
                localStorage[config.data[0].storage_key + '_pColor'] = "";
                localStorage[config.data[0].storage_key + '_pQuantities'] = "";
                localStorage[config.data[0].storage_key + '_pTitles'] = "";
                localStorage[config.data[0].storage_key + '_pShippCharge'] = "";
                localStorage[config.data[0].storage_key + '_pIds'] = "";
                localStorage[config.data[0].storage_key + '_pcustom_options'] = "";
                localStorage[config.data[0].storage_key + '_subtotal'] = "";
                localStorage[config.data[0].storage_key + '_totalAmount'] = "";
                localStorage[config.data[0].storage_key + '_TotalShipp'] = "";
                localStorage[config.data[0].storage_key+'_pnew_pro_data'] = "";
                
               /* var new_pro_data = {};
                new_pro_data["pro_type"] = pType;
                new_pro_data["parent_id"] = global_results_configurable.parent.id;
                localStorage[config.data[0].storage_key+'_pnew_pro_data']*/
                
                
                
                alldatalength = allorderlistdata.length;
                var rpids = [];
                var new_data = [];
                var rpNames = [];
                var rpPrices = [];
                var rpImages = [];
                var rpSizes = [];
                var rpColor = [];
                var rpQuantities = [];
                var rpTitles = [];
                var rpShippCharge = [];
                var rpcustom_options = [];
                var rcartsubtotal = 0;
                var rshipchargetotal = 0;
                var detailedorderid = orderid;
                var BASE_URL = config.data[0].baseurl;
                var STORE = config.data[0].storeid;
                var app_curr_code = config.data[0].app_currency;
                var orderdetailhtml = '';
                var i = 0;
                if (alldatalength) {
                    for (i = 0; i < alldatalength; i++) {

                        if (allorderlistdata[i].order_id == detailedorderid) {

                            var rproductids = allorderlistdata[i].product.id;
                            var rproductimages = allorderlistdata[i].product.image;
                            var rproductquantity = allorderlistdata[i].product.quantity;
                            var rproductidslen = rproductids.length;

                            var pidscol = [];
                            var rpidsarr = new Object();
                            for (j = 0; j < rproductidslen; j++) {
                                pidscol[j] = allorderlistdata[i].product.id[j];
                            }
                            rpidsarr["id"] = pidscol;
                            var rpidsarrcol = JSON.stringify(rpidsarr);

                            console.log(BASE_URL + "?callback=?" + "&store=" + STORE + "&service=mofluid_reorder&pid=" + rpidsarrcol + "&currency=" + app_curr_code+"&orderid="+orderid);
                            if (rproductidslen) {
                                var reorder_webservice = BASE_URL + "?callback=?" + "&store=" + STORE + "&service=mofluid_reorder&pid=" + rpidsarrcol + "&currency=" + app_curr_code+"&orderid="+orderid;
                                $.ajax({
                                    url: reorder_webservice,
                                    type: "get",
                                    dataType: "jsonp",
                                    beforeSend: function() {
                                        console.log("Before reorder Webservice");
                                    },
                                    error: function() {
                                        if (config.data[0].platform == 'ios' || config.data[0].platform == 'android') {
                                            navigator.notification.alert(locale.message.alert["try_again"], function() {}, config.data[0].app_name, locale.message.button["close"]);
                                        } else {
                                            alert(locale.message.alert["try_again"])
                                        }
                                        console.log("Error  on Webservice");
                                    },
                                    complete: function() {
                                        console.log("Complete Webservice");
                                    },
                                    success: function(results) {

                                        var j = 0;
                                        var flag = 0;
                                        for (j = 0; j < rproductidslen; j++) {
                                            var rproductdata = results[j];
                                            var rproductquantityin = rproductdata.quantity["available"];
                                            var rproductstatus = rproductdata.status;
                                            if (rproductquantityin > 0 && rproductstatus == 1) {
                                                //alert("order qu = "+rproductquantity[j]);
                                                //alert(rproductquantityin);
                                                if (parseInt(rproductquantity[j]) <= parseInt(rproductquantityin)) {
                                                    rpids[flag] = rproductdata.id;
                                                    rpNames[flag] = rproductdata.sku;
                                                    if (rproductdata.sprice > 0)
                                                        rpPrices[flag] = rproductdata.sprice;
                                                    else
                                                        rpPrices[flag] = rproductdata.price;
                                                    rpQuantities[flag] = parseInt(rproductquantity[j]);
                                                    //alert("price of prod = "+parseFloat(rproductdata.price));
                                                    rcartsubtotal += parseFloat(rproductdata.price).toFixed(2) * parseFloat(rproductquantity[j]);
                                                    //alert("price of cart = "+parseFloat(rcartsubtotal));
                                                    rpImages[flag] = rproductimages[j];
                                                    rpSizes[flag] = "N/A";
                                                    rpColor[flag] = "N/A";
                                                    rpTitles[flag] = rproductdata.name;
                                       
                                       
                                                   var new_pro_data = {};
                                                   new_pro_data["pro_type"] = rproductdata.type;
                                                   new_pro_data["parent_id"] = rproductdata.id;
                                                   new_data[flag] = new_pro_data;
                            
                                       
                                       
                                                    rpShippCharge[flag] = rproductdata.shipping;
                                                    //alert("price of prod ship = "+parseFloat(rpShippCharge[flag]));
                                                    rshipchargetotal += parseFloat(rproductdata.shipping).toFixed(2);
                                                    //alert("price of prod total = "+parseFloat(rshipchargetotal));
                                                    if(rproductdata.has_custom_option)
                                                        rpcustom_options[flag] =  rproductdata.custom_option;
                                                    else
                                                     	rpcustom_options[flag] = {};
                                                    flag++;
                                                }
                                            }
                                        }
                                        if (flag > 0) {
                                        
                                        
                                            localStorage[config.data[0].storage_key + '_pNames'] = JSON.stringify(rpNames);
                                            localStorage[config.data[0].storage_key+'_pnew_pro_data'] = JSON.stringify(new_data);

                                            localStorage[config.data[0].storage_key + '_pPrices'] = JSON.stringify(rpPrices);
                                            localStorage[config.data[0].storage_key + '_pImages'] = JSON.stringify(rpImages);
                                            localStorage[config.data[0].storage_key + '_pQuantities'] = JSON.stringify(rpQuantities);
                                            localStorage[config.data[0].storage_key + '_pTitles'] = JSON.stringify(rpTitles);
                                            localStorage[config.data[0].storage_key + '_pIds'] = JSON.stringify(rpids);
                                            localStorage[config.data[0].storage_key + '_pcustom_options'] = JSON.stringify(rpcustom_options);
                                            localStorage[config.data[0].storage_key + '_subtotal'] = rcartsubtotal;
                                            localStorage[config.data[0].storage_key + '_totalAmount'] = rcartsubtotal;
                                            localStorage[config.data[0].storage_key + '_TotalShipp'] = rshipchargetotal;
                                            localStorage[config.data[0].storage_key+'_pShippCharge'] = JSON.stringify(rpShippCharge);
                                            var dirPath = dirname(location.href);
                                            var fullPath = dirPath + "/cart.html";
                                            window.location = fullPath;
                                            $(".ui-loader").hide();
                                        } else {
                                            if (config.data[0].platform == 'ios' || config.data[0].platform == 'android') {
                                                navigator.notification.alert(locale.message.alert["products_out_of_stock_message"], function() {
                                                    redirectTopage("myorder.html");
                                                }, config.data[0].app_name, locale.message.button["close"]);
                                            } else {
                                                alert(locale.message.alert["products_out_of_stock_message"]);
                                                redirectTopage("myorder.html");
                                            }
                                            $(".ui-loader").hide();
                                        }
                                    }
                                });

                            }
                            break;
                        }
                    }
                }


            }


            function productdescription(orderid) {
                pagescrolldata = 1;
                 $("#myorder_msg").html("");
                // alert(pagescrolldata);
                console.log(allorderlistdata);
                $("#myorder_content").show();
                $("#myorder_msg").hide();
                $(".ui-loader").show();
                var detailedorderid = orderid;
                var BASE_URL = config.data[0].baseurl;
                var STORE = config.data[0].storeid;
                var Session = JSON.parse(localStorage[config.data[0].storage_key + '_Session']);
                var app_curr_code = config.data[0].app_currency;
                var customerid = Session["customer_id"];
                var coupon_status = "";
                var discount_amount = "";
                var coupon_code = "";
                var shipmyid = "";
                $(".ui-loader").show();
                //---Fetch Store Details from Mofluid Magento Web Service

                alldatalength = allorderlistdata.length;
                var orderdetailhtml = '';
                var i = 0;
                if (alldatalength) {
                    for (i = 0; i < alldatalength; i++) {
                        if (allorderlistdata[i].order_id == detailedorderid) {
                            console.log(allorderlistdata[i]);
                            var billadd_city = allorderlistdata[i].billing_address.city;
                            var billadd_company = allorderlistdata[i].billing_address.company;
                            if (billadd_company == null) {
                                billadd_company = "";
                            }
                            var billadd_contactno = allorderlistdata[i].billing_address.contactno;
                            var billadd_countryid = allorderlistdata[i].billing_address.countryid;
                            var billadd_firstname = allorderlistdata[i].billing_address.firstname;
                            var billadd_lastname = allorderlistdata[i].billing_address.lastname;
                            var billadd_pincode = allorderlistdata[i].billing_address.pincode;
                            var billadd_region = allorderlistdata[i].billing_address.region;
                            if (billadd_region == null) {
                                billadd_region = "";
                            }
                            var billadd_street = allorderlistdata[i].billing_address.street;

                            var shipadd_city = allorderlistdata[i].shipping_address.city;
                            var shipadd_company = allorderlistdata[i].shipping_address.company;
                            if (shipadd_company == null) {
                                shipadd_company = "";
                            }
                            var shipadd_contactno = allorderlistdata[i].shipping_address.contactno;
                            var shipadd_countryid = allorderlistdata[i].shipping_address.countryid;
                            var shipadd_firstname = allorderlistdata[i].shipping_address.firstname;
                            var shipadd_lastname = allorderlistdata[i].shipping_address.lastname;
                            var shipadd_pincode = allorderlistdata[i].shipping_address.pincode;
                            var shipadd_region = allorderlistdata[i].shipping_address.region;
                            if (shipadd_region == null) {
                                shipadd_region = "";
                            }
                            var shipadd_street = allorderlistdata[i].shipping_address.street;

                            var bill_add = billadd_firstname + billadd_lastname + billadd_street + billadd_city + billadd_pincode + billadd_region + billadd_countryid + billadd_contactno;
                            var ship_add = shipadd_firstname + shipadd_lastname + shipadd_street + shipadd_city + shipadd_pincode + shipadd_region + shipadd_countryid + shipadd_contactno;
                            var compareflag = bill_add.localeCompare(ship_add);

                            orderdetailhtml += '<div class="mainordedetail" id="mainordedetail">\
                                                    <div class="mainordedetaillabel" id="mainordedetaillabel">' + locale.message.text["items_in_your_order"] + '</div>\
                                                    <div class="mainordedetaildes" id="mainordedetaildes">';
                            if (compareflag == 0) {
                                orderdetailhtml += '<div class="orderdetaillabel" id="orderdetaillabel">' + locale.message.text["billing__shipping_address"] + '</div>';
                            } else {
                                orderdetailhtml += '<div class="orderdetaillabel" id="orderdetaillabel">' + locale.message.text["billing_address"] + '</div>';
                            }

                            orderdetailhtml += '<div class="orderdetailvalue" id="orderdetailvalue">\
                                                            <div class="billnamebold">' + billadd_firstname + ' ' + billadd_lastname + '</div>\
                                                            <div>' + billadd_street + '</div>\
                                                            <div>' + billadd_city + ' ' + billadd_pincode + '';

                            if (billadd_region != "") {
                                orderdetailhtml += ', ' + billadd_region + '';
                            }

                            orderdetailhtml += ', ' + billadd_countryid + '</div>\
                                                            <div>Ph ' + billadd_contactno + '</div>\
                                                        </div>\
                                                    </div>';

                            if (compareflag != 0) {
                                orderdetailhtml += '<div class="mainordedetaildes" id="mainordedetaildes">\
                                                            <div class="orderdetaillabel" id="orderdetaillabel">' + locale.message.text["shipping_address"] + '</div>\
                                                            <div class="orderdetailvalue" id="orderdetailvalue">\
                                                                <div class="billnamebold">' + shipadd_firstname + ' ' + shipadd_lastname + '</div>\
                                                                <div>' + shipadd_street + '</div>\
                                                                <div>' + shipadd_city + ' ' + shipadd_pincode + '';

                                if (shipadd_region != "") {
                                    orderdetailhtml += ', ' + shipadd_region + '';
                                }

                                orderdetailhtml += '	,' + shipadd_countryid + '</div>\
                                                                <div>Ph ' + shipadd_contactno + '</div>\
                                                            </div>\
                                                        </div>';
                            }
                            orderdetailhtml += '<div class="mainordedetaildes" id="mainordedetaildes">\
                                                        <div class="orderdetaillabel" id="orderdetaillabel">' + locale.message.text["grand_total"] + '</div>\
                                                        <div class="orderdetailvalue" id="orderdetailvalue">' + app_curr_symbol + ' ' + parseFloat(allorderlistdata[i].grand_total).toFixed(2) + '</div>\
                                                    </div>\
                                                    <div class="mainordedetaildes" id="mainordedetaildes">\
                                                        <div class="orderdetaillabel" id="orderdetaillabel">' + locale.message.text["status"] + '</div>\
                                                        <div class="orderdetailvalue" id="orderdetailvalue">' + allorderlistdata[i].status + '</div>\
                                                    </div>\
                                                    <div class="mainordedetaildes" id="mainordedetaildes">\
                                                        <div class="orderdetaillabel" id="orderdetaillabel">' + locale.message.text["order_id"] + '</div>\
                                                        <div class="orderdetailvalue" id="orderdetailvalue">' + allorderlistdata[i].order_id + '</div>\
                                                    </div>\
                                                    <div class="mainordedetaildes" id="mainordedetaildes">\
                                                        <div class="orderdetaillabel" id="orderdetaillabel">' + locale.message.text["payment_method"] + '</div>\
                                                        <div class="orderdetailvalue" id="orderdetailvalue">' + allorderlistdata[i].payment_method.payment_method_title + '</div>\
                                                    </div>\
                                                    <div class="mainordedetaildes" id="mainordedetaildes">\
                                                        <div class="orderdetaillabel" id="orderdetaillabel">' + locale.message.text["shipping_method"] + '</div>\
                                                        <div class="orderdetailvalue" id="orderdetailvalue">' + allorderlistdata[i].shipping_message + '</div>\
                                                    </div>\
                                                    <div class="mainordedetaildes" id="mainordedetaildes">\
                                                        <div class="orderdetaillabel" id="orderdetaillabel">' + locale.message.text["order_date"] + '</div>\
                                                        <div class="orderdetailvalue" id="orderdetailvalue">' + allorderlistdata[i].order_date + '</div>\
                                                    </div>\
                                                    <div class="mainordedetaillabel" id="mainordedetaillabel">' + locale.message.text["items_in_your_order"] + '</div>';
                            var productidslength = allorderlistdata[i].product.id.length;
                            //alert("leng is ="+productidslength);
                            var j = 0;
                            for (j = 0; j < productidslength; j++) {
                                orderdetailhtml += '<div class="mainproductcolsubdiv" id="mainproductcolsubdiv">\
                                                    <div class="mainproductcolimgdiv" id="mainproductcolimgdiv">\
                                                        <img src="' + allorderlistdata[i].product.image[j] + '" onerror="bad_image(this);"/>\
                                                    </div>\
                                                    <div class="mainproductcoldesdiv" id="mainproductcoldesdiv">\
                                                        <div class="mainproductcoldesname" id="mainproductcoldesname">' + allorderlistdata[i].product.name[j] + '</div>\
                                                        <div class="mainproductcoldesprice" id="mainproductcoldesprice">\
                                                            <div class="maincoldesprice">' + app_curr_symbol + ' ' + parseFloat(allorderlistdata[i].product.unitprice[j]).toFixed(2) + '</div>\
                                                            <div class="maincoldessymbol">x</div>\
                                                            <div class ="maincoldesquan">' + parseInt(allorderlistdata[i].product.quantity[j]) + '</div>';
                                var productcaltotal = allorderlistdata[i].product.quantity[j] * allorderlistdata[i].product.unitprice[j];
                                //alert(productcaltotal);
                                orderdetailhtml += '<div class ="maincoldestotal product_price_color">' + app_curr_symbol + ' ' + parseFloat(productcaltotal).toFixed(2) + '</div></div>\
                                                    </div>\
                                                 </div>';
                            }

                            orderdetailhtml += '<div class="mainordedetailgrand" id="mainordedetailgrand">\
                                                    <div class="mainordedetailgrandleft"><b>' + locale.message.text["shipping_amount"] + '</b></div>\
                                                    <div class="mainordedetailgrandright product_price_color">' + app_curr_symbol + ' ' + parseFloat(allorderlistdata[i].shipping_amount).toFixed(2) + '</div><div class="mainordedetailgrandleft"><b>' + locale.message.text["tax"] + '</b></div>\
                                                    <div class="mainordedetailgrandright product_price_color">' + app_curr_symbol + ' ' + parseFloat(allorderlistdata[i].tax_amount).toFixed(2) + '</div>';
                            if (allorderlistdata[i].discount_amount) {
                                orderdetailhtml += '<div class="mainordedetailgrandleft"><b>' + locale.message.text["discount"] + '</b></div>\
                                                    <div class="mainordedetailgrandright product_price_color">-' + app_curr_symbol + ' ' + parseFloat(allorderlistdata[i].discount_amount).toFixed(2) + '</div>';
                            }
                            orderdetailhtml += '<div class="mainordedetailgrandleft"><b>' + locale.message.text["grand_total"] + '</b></div>\
                                                    <div class="mainordedetailgrandright product_price_color">' + app_curr_symbol + ' ' + parseFloat(allorderlistdata[i].grand_total).toFixed(2) + '</div>\
                                                </div>\
                                                <div class="viewallorder" id="viewallorder" onclick="location.reload(true);">' + locale.message.text["view_all_orders"] + '</div>\
                                            </div>';
                            break;
                        }
                    }

                }
                //alert(orderdetailhtml);
                $("#myorder_content").html(orderdetailhtml);
                $("#myorder_content").trigger("create");
                $(".ui-loader").hide();


            }

            function showHideDiv1(id) {
                var obj = document.getElementById(id);
                if (obj.style.display == "none") {
                    obj.style.display = 'block';
                } else if (obj.style.display == "block") {
                    obj.style.display = 'none';
                }
            }
        localStorage.setItem('foo', 0);
        </script>
   

      
	<script>
	
	
	
	   function submitform() {
            var username = $("#username").val();
            var password = $("#password").val();
            if(username == "") {
                if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                    //navigator.notification.alert(locale.message.alert["username_validation_for_blank"],function () {}, config.data[0].app_name, locale.message.button["close"]);
               
			      jQuery('.err-wronglogin').html(locale.message.alert["username_validation_for_blank"]);
				  
				   jQuery('.err-wronglogin').show();

			   }
                else
                {
                    //alert(locale.message.alert["username_validation_for_blank"]);
					
					
					 jQuery('.err-wronglogin').html(locale.message.alert["username_validation_for_blank"]);
				  
				   jQuery('.err-wronglogin').show();
                }
            }
            else if(!checkEmail(username)) {
                if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                   // navigator.notification.alert(locale.message.alert["username_validation_for_wrong_attempt"],function () {}, config.data[0].app_name, locale.message.button["close"]);
					
					
					  jQuery('.err-wronglogin').html(locale.message.alert["username_validation_for_wrong_attempt"]);
				  
				       jQuery('.err-wronglogin').show();
					
                }
                else {
                    alert(locale.message.alert["username_validation_for_wrong_attempt"]);
					
					  jQuery('.err-wronglogin').html(locale.message.alert["username_validation_for_wrong_attempt"]);
				  
				       jQuery('.err-wronglogin').show();
                }
            }
            else if(password.length<6) {
                if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                   // navigator.notification.alert(locale.message.alert["password_validation_for_minimum_length"],function () {}, config.data[0].app_name, locale.message.button["close"]);
               
			      jQuery('.err-longpassword').html(locale.message.alert["password_validation_for_minimum_length"]);
				  
				       jQuery('.err-longpassword').show();	

			   }
                else {
                    //alert(locale.message.alert["password_validation_for_minimum_length"]);
					
					  jQuery('.err-longpassword').html(locale.message.alert["password_validation_for_minimum_length"]);
				  
				       jQuery('.err-longpassword').show();		 				
					
                }
            }
            else {
                 $(".youama-ajaxlogin-button").html('<center><img src="images/spin.gif"></center>');
                var BASE_URL  = config.data[0].baseurl;
                var STORE = config.data[0].storeid;
                $.getJSON(""+BASE_URL+"?callback=?"+"&store="+STORE+"&service=verifylogin"+"&username="+username+"&password="+Base64.encode(password),
                          function (response) {
                          if(response["login_status"] == "0") {
                          if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                          navigator.notification.alert(locale.message.alert["invalid_username__password_message"],function () {}, config.data[0].app_name, locale.message.button["close"]);
                          }
                          else {
                            alert(locale.message.alert["invalid_username__password_message"]);
                          }
                          $(".youama-ajaxlogin-button").html('<span><span>Login</span></span>');
                          //$("#loginbutton_div").trigger('create');
                          }
                          else if(response["login_status"] == "1") {
                          localStorage[config.data[0].storage_key+"_Loginemail"]=username;
                          loginStart(response["id"], response["firstname"], response["lastname"], response["username"], response["password"]);
                          if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                          //navigator.notification.alert(locale.message.alert["login_success_message"] + response["firstname"],function () {}, config.data[0].app_name, locale.message.button["close"]);
                          navigator.notification.alert(locale.message.alert["login_success_message"].replace("{{username}}",response["firstname"]),function () {}, config.data[0].app_name, locale.message.button["close"]);
                          //locale.message.alert["login_success_message"].replace("{{username}}",response["firstname"])
                          }
                          else
                          {
                          alert(locale.message.alert["login_success_message"].replace("{{username}}",response["firstname"]));
                          }
                          if(localStorage[config.data[0].storage_key+"_nextpage"] == null || localStorage[config.data[0].storage_key+"_nextpage"] == "null") {
                          redirectTopage('index.html');
                          }
                          else {
                          var dirPath = dirname(location.href);
                          var fullPath = dirPath +"/"+localStorage[config.data[0].storage_key+"_nextpage"];
                          localStorage[config.data[0].storage_key+"_nextpage"] = null;
                          window.location=fullPath;
                          }
						    
							jQuery('#loginbtn').click();
							

					  
					     jQuery('.myact').html('<a class="skip-link skip-account ui-link" id="logoutbtn" onclick="logOut()" href="javascript:void(0)"><span class="label">Log Out</span></a>');
                        
						}
                          else {
                          if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                          navigator.notification.alert(locale.message.alert["server_not_responding"] ,function () {}, config.data[0].app_name, locale.message.button["close"]);
                          }
                          else {
                          alert(locale.message.alert["server_not_responding"]);
                          }
                          }
                          });
            }
        }
		
		
		function logOut() {
			localStorage[config.data[0].storage_key+'_Session'] = null;
			
			if (config.data[0].platform == 'ios' || config.data[0].platform == 'android') {
				navigator.notification.alert(locale.message.alert["sign_out_message"], function() {}, config.data[0].app_name, locale.message.button["close"]);
			} else {
				alert(locale.message.alert["sign_out_message"]);
			}
			//redirectTopage('index.html');
			
			
         
		     jQuery('.myact').html('<a class="skip-link skip-account ui-link" id="loginbtn" href="javascript:void(0)"><span class="label">Login</span></a>');
                       
		 
		 
		 }
		 
		 function regsubmitform() {
            var password, email, full_name, first_name, last_name;
           
			full_name = $("#fullname").val();
			full_name = full_name.replace(/\s{2,}/g, ' ');
			var fullnameval = full_name.split(" ");
			var i = 0;
			var firstnameval = [];
			for(i = 0; i < (fullnameval.length-1); i++){
			firstnameval[i] = fullnameval[i];
			}
			first_name = firstnameval.toString().replace(/\,/g, ' ');
			
			last_name = fullnameval[fullnameval.length-1];
			if(fullnameval.length == 1)
				last_name = first_name = fullnameval.toString();
            email = $("#email").val();
            password = $("#rpassword").val();
			
			var cpassword = $("#cpassword").val();
			
             if(fullnameval.length < 2 || fullnameval[1]=='' || fullnameval[1]=='undefined')
            {
                if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                    navigator.notification.alert(locale.message.alert["full_name_message"],function () {},config.data[0].app_name, locale.message.button["close"]);
                }
                else{
                    alert(locale.message.alert["full_name_message"]);
                }
                return false;
            }
            if(first_name == "") {
                if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                    navigator.notification.alert(locale.message.alert["firstname_blank"],function () {},config.data[0].app_name, locale.message.button["close"]);
                }
                else{
                    alert(locale.message.alert["firstname_blank"]);
                }
            }
            else if(!isValidName(first_name)) {
                if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                    navigator.notification.alert(locale.message.alert["firstname_invalid"],function () {},config.data[0].app_name, locale.message.button["close"]);
                }
                else{
                    alert(locale.message.alert["firstname_invalid"]);
                }
            }
            else if(email == "") {
                if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                    navigator.notification.alert(locale.message.alert["empty_email"],function () {},config.data[0].app_name, locale.message.button["close"]);
                }
                else {
                    alert(locale.message.alert["empty_email"]);
                }
            }
            else if(!checkEmail(email)) {
                if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                    navigator.notification.alert(locale.message.alert["invalid_email"],function () {},config.data[0].app_name, locale.message.button["close"]);
                }
                else{
                    alert(locale.message.alert["invalid_email"]);
                }
            }
            else if(password.length < 6) {
                if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
                    navigator.notification.alert(locale.message.alert["password_validation_for_minimum_length"],function () {},config.data[0].app_name, locale.message.button["close"]);
                }
                else{
                    alert(locale.message.alert["password_validation_for_minimum_length"]);
                }
            }else if(password!=cpassword) {
			  
			     alert('Confirm password not matched');
			
			}
            else {
                $("#rgsbtn").html('<center><img src="images/spin.gif"></center>');
                var customerid;
                var STORE = config.data[0].storeid;
                var BASE_URL  = config.data[0].baseurl;
               // alert(BASE_URL+"?callback=?"+"&store="+STORE+"&service=createuser&firstname="+first_name+"&lastname="+last_name+"&email="+email+"&password="+Base64.encode(password));
                $.getJSON(""+BASE_URL+"?callback=?"+"&store="+STORE+"&service=createuser&firstname="+first_name+"&lastname="+last_name+"&email="+email+"&password="+Base64.encode(password)+"",
                          function (response) {
							  try {
								  var status = response["status"];
								  if(status!=0 ) {
									customerid = response["id"];
								  }
								  else {
									customerid = -1;
								  }
							  }
							  catch(ex) {
								customerid = -1;
							  }
							  if(customerid<=0) {
								  if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
									navigator.notification.alert(locale.message.alert["email_already_registered"],function () {},config.data[0].app_name, locale.message.button["close"]);
								  }
								  else{
									alert(locale.message.alert["email_already_registered"]);
								  }
								  $("#email").val("");
								  $("#password").val("");
								  $("#cpassword").val("");
								  //$("#registerbutton_div").html('<input type="submit" data-role="button" data-theme="b" id="registerbutton" name="registerbutton" value="'+ locale.message.button["sign_up_now"] +'" />');
								  $("#rgsbtn").html('<span><span>Register</span></span>');
								 // $("#registerbutton_div").trigger('create');
							  }
							  else {
								  localStorage[config.data[0].storage_key+"_Loginemail"]=email;
								  loginStart(customerid, first_name, last_name, email, password);
								  if (config.data[0].platform=='ios' || config.data[0].platform=='android'){
									  navigator.notification.alert(locale.message.alert["register_successfully_message"],function () {},config.data[0].app_name, locale.message.button["close"]);
								  }
								  else{
									  alert(locale.message.alert["register_successfully_message"]);
								  }
								  if(localStorage[config.data[0].storage_key+"_nextpage"] == null || localStorage[config.data[0].storage_key+"_nextpage"] == "null") {
									  visitHomePage();
								  }
								  else {
									  var dirPath = dirname(location.href);
									  var fullPath = dirPath +"/"+localStorage[config.data[0].storage_key+"_nextpage"];
									  localStorage[config.data[0].storage_key+"_nextpage"] = null;
									  window.location=fullPath;
									  
									  jQuery('#loginbtn').click();
								  }
							  }
                          });
            }
        }
		
               
 function getcartitem()
 {
   
	 var storage_key='Eluvyeccc3';
	var storedNames = JSON.parse(localStorage['Eluvyeccc3'+'_pNames']);
	
	
			  try{
                    var emptyText = '<div align="center"><div><img src="images/themeicons/cart_empty_150x150.png" width="150"></div><div class="empty_text">"' + locale.message.text["cart_empty_text"] + '"</div></div>';
                    var cartItems=0;
                   // $("#cartProductslist").html(emptyText);
                   // $("#cartbtn2").hide();
                    //$("#couponcode").hide();
                    try{
                        cartItems = JSON.parse(localStorage[config.data[0].storage_key+'_pNames']).length;
                    }
                    catch(Ex){
                        cartItems=0;
                    }
                   
                    if(cartItems<=0){
                        
                    }
                      storedNames = JSON.parse(localStorage[config.data[0].storage_key+'_pNames']);
					  
					  jQuery('#totalcount').html(storedNames.length);
	
                     var storedPrices = JSON.parse(localStorage[config.data[0].storage_key+'_pPrices']);
                     var  storedImages = JSON.parse(localStorage[config.data[0].storage_key+'_pImages']);
                    try {
                       var  storedSizes = JSON.parse(localStorage[config.data[0].storage_key+'_pSizes']);
                        var storedColor = JSON.parse(localStorage[config.data[0].storage_key+'_pColor']);
                    }
                    catch(rr) {
                        var storedSizes = '';
                        var storedColor = '';
                    }
					
                   var  storedQuantities = JSON.parse(localStorage[config.data[0].storage_key+'_pQuantities']);
				   
                    var cart_val=storedQuantities.reduce(function(prev, cur) {
                                    return parseInt(prev) + parseInt(cur);
                                 });
                    var storedTitles = JSON.parse(localStorage[config.data[0].storage_key+'_pTitles']);
                     try {
                        var storedShipping = JSON.parse(localStorage[config.data[0].storage_key+'_pShippCharge']);
                     }
                     catch(rr) {
                        var storedShipping = '';
                     }
                     var storedIds = JSON.parse(localStorage[config.data[0].storage_key+'_pIds']);
                     
                     
                     var parent_pro_data = JSON.parse(localStorage[config.data[0].storage_key+'_pnew_pro_data']);
                     
                     
                     
                     var CouponDetail =new Object();
                     var discount_amount,apply_to_shipping,simple_action,discount_qty,shipmyidonly;
                    
                    // $("#cartProductslist").html('<center><img src="images/spin.gif" /></center>');
                     var parray = new Object();
                     for(var i=0;i<storedIds.length;i++){
                         parray[i] = storedIds[i];
                     }
                     var productid=JSON.stringify(parray);
                     var BASE_URL  = config.data[0].baseurl;
                     var STORE = config.data[0].storeid;
                     //---Fetch Store Details from Mofluid Magento Web Service
                     $.getJSON(""+BASE_URL+"?callback=?"+"&store="+STORE+"&service=productQuantity&product="+productid, function (response) {
                        var productquan_response=response;
                               
                        var i=0, productList = '<div class="minicart-wrapper"><p class="block-subtitle">Recently added item(s)<a class="close skip-link-close" href="#" title="Close"></a></p><div><ul id="cart-sidebar" class="mini-products-list">';
                         

						 if(storedNames.length==""){
                              
                        
                           // $("#couponcode").hide();
                        }
                        else if(!(storedNames.length)) {
                            var emptyText = '<div align="center"><div><img src="images/themeicons/cart_empty_150x150.png" width="150"></div class="empty_text"><div>'+locale.message.text["cart_empty_text"]+'</div></div>';
                       
                         //   $("#couponcode").hide();
                        }
                        else {
						
						
                            while(i<storedNames.length) {
                              
                              
                                var pName = storedNames[i],pSize = storedSizes[i],pColor=storedColor[i];
                                pName = "'"+pName+"'", pSize = "'"+pSize+"'",pColor = "'"+pColor+"'";
                                var pship = "'"+storedShipping[i]+"'";
                                if(!storedSizes[i]) {
                                    storedSizes[i] = '';
                                }
                             
                       
                               
                                productList += '<li class="item odd" >\n\
								                <a onclick="getProDetail('+parent_pro_data[i].parent_id+',1,\''+parent_pro_data[i].pro_type+'\')"  class="product-image">\n\
                                                   <img  src="'+storedImages[i]+'" onerror="bad_image(this);" width="50" height="50"></a>\n\
												    <div class="product-details"><p class="product-name"><a onclick="getProDetail('+parent_pro_data[i].parent_id+',1,\''+parent_pro_data[i].pro_type+'\')">'+ storedTitles[i] +'</a></p>\n\
													<table class="info-wrapper">\n\
													<tbody><tr><td><span>Price:</span><span class="price">'+app_curr_symbol+ parseFloat(storedPrices[i]).toFixed(2) +'</span> </td></tr>\n\
															<tr class="qty-wrapper"><td><span>Qty:</span><input id="qinput-348" class="qty cart-item-quantity" name="" value="'+storedQuantities[i]+'"></td></tr>\n\
														</tbody>\n\
													</table>\n\
                                             	<div class="removeitem"><a  onclick="removeItem('+i+')" title="Remove This Item"  class="remove"><i class="fa fa-trash-o"></i></a></div> </div></li>';
                               
                               
                               
                               i++;
                               
                               
                               
                            }
							
							
                         
                            var ttlAmt = 0;
                            var shipAmt=0;
                            var ttlAll=0;
                            var i = 0;
                            while(i < cartItems) {
                                ttlAmt = ttlAmt + (storedQuantities[i] * storedPrices[i] );
                             
                                i++;
                            }
							
							 productList +='</ul> </div><div id="minicart-widgets"></div><div class="block-content"><p class="subtotal"><span class="label">Cart Subtotal:</span> <span class="price">$'+ttlAmt+'</span></p>\n\
									</div> <div class="minicart-actions"><a class="cart-link" onclick="goTopage()">View Shopping Cart</a>\n\
											<ul class="checkout-types minicart"><li><a title="Checkout" class="button checkout-button" onClick="proceedcheck();">Checkout</a></li></ul></div></div>';
							jQuery('#minicart').html(productList);
                         
                         
                            
                           
                        }
                    });
                } catch(err2) {
                    console.log(err2);
					
					alert(err2);
                }
			  
	
	
	   



						
  						
            }

			
			function proceed() {
                try {
                    var Session = JSON.parse(localStorage[config.data[0].storage_key+'_Session']);
                }
                catch(err) {
                    console.log(err.message);
                    var dirPath = dirname(location.href);
                    var fullPath = dirPath + "/guestcheckout.html";
                    window.location = fullPath;
                }
                var isValidQuantity = 1;
                $('#cartProductslist input[type=number]').each(function() {
                    if(/^\+?(0|[1-9]\d*)$/.test($(this).val())) {
                        console.log("Valid Quantity");
                    }
                    else {
                        isValidQuantity = 0;
                        return false;
                    }
                });
                if(isValidQuantity) {
                    if(Session == null) {
                        var dirPath = dirname(location.href);
                        localStorage[config.data[0].storage_key+"_nextpage"] = "buy_now.html?amount=" + localStorage[config.data[0].storage_key+'_subtotal']+"";
                        var fullPath = dirPath + "/guestcheckout.html";
                        window.location=fullPath;
                    }
                    else {
                        $('#buyNow2').button ("disable");
                        var fullPath = "buy_now.html?amount=" + localStorage[config.data[0].storage_key+'_subtotal']+"";
                        window.location=fullPath;
                    }
                }
                else {
                   console.error("Inalid Quantity");
                   if (config.data[0].platform=='ios' || config.data[0].platform=='android') {
                       
                       navigator.notification.alert(locale.message.text["invalid_quantity"],function () {},config.data[0].app_name, locale.message.button["close"]);
                   }
                   else{
                       alert(locale.message.text["invalid_quantity"]);
                   }
                }
            }
            
            /*
             *Function call to check cart item quantity
             *@param
             *@return
             */
            
            function proceedcheck(){
                var flag;
                storedIds = JSON.parse(localStorage[config.data[0].storage_key+'_pIds']);
                var product_name_array = JSON.parse(localStorage[config.data[0].storage_key+'_pTitles']);
                var parray = new Object();
                for(var i=0;i<storedIds.length;i++){
                    parray[i] = storedIds[i];
                }
                productid=JSON.stringify(parray);
                var BASE_URL  = config.data[0].baseurl;
                var STORE = config.data[0].storeid;
                $.mobile.loading("show");
                //---Fetch Store Details from Mofluid Magento Web Service
                $.getJSON(""+BASE_URL+"?callback=?"+"&store="+STORE+"&service=productQuantity&product="+productid, function (response) {
                          $.mobile.loading("hide");
                    flag=0;
                    productquan_response=response;
                    for (var i=0;i<storedIds.length;i++){
                        if(productquan_response[storedIds[i]]==0){
                          
                            if (config.data[0].platform=='ios' || config.data[0].platform=='android') {
                                navigator.notification.alert(locale.message.alert["item_remove_message"] +"-"+ product_name_array[i],function (){},config.data[0].app_name, locale.message.button["close"]);
                            }
                            else{
                                alert(locale.message.alert["item_remove_message"] +"-"+ product_name_array[i]);
                            }
                            flag=1;
                        }
                    }
                    if(flag==0){
                        proceed();
                    }
                });
            }
			
	  function goTopage()
            {	  
			   redirectTopage('cart.html');
             } 

function removeItem(index) {
    var nameArray = JSON.parse(localStorage[config.data[0].storage_key+'_pNames']);
    var priceArray = JSON.parse(localStorage[config.data[0].storage_key+'_pPrices']);
    var imageArray = JSON.parse(localStorage[config.data[0].storage_key+'_pImages']);
    var title = JSON.parse(localStorage[config.data[0].storage_key+'_pTitles']);
    try {
        var sizes=JSON.parse(localStorage[config.data[0].storage_key+'_pSizes']);
        var colors=JSON.parse(localStorage[config.data[0].storage_key+'_pColor']);
    }
    catch(ee) {
        var sizes='';
        var colors='';
    }
    var pIds=JSON.parse(localStorage[config.data[0].storage_key+'_pIds']);
    if(localStorage.getItem(config.data[0].storage_key+"_pQuantities") === null) {
        var quantityArray = [];
    }
    else
        var quantityArray = JSON.parse(localStorage[config.data[0].storage_key+'_pQuantities']);
    var pnew_pro_dataArray = JSON.parse(localStorage[config.data[0].storage_key+'_pnew_pro_data']);
    var pcustomoptionsArray = JSON.parse(localStorage[config.data[0].storage_key+'_pcustom_options']);
    
    
    var pname1=title[index];
    nameArray.splice(index, 1);
    priceArray.splice(index, 1);
    imageArray.splice(index, 1);
    quantityArray.splice(index, 1);
    title.splice(index, 1);
    try {
        sizes.splice(index,1);
        colors.splice(index,1);
    }
    catch(ee) {
        var sizes='';
        var colors='';
    }
    pIds.splice(index,1);
    pnew_pro_dataArray.splice(index, 1);
    pcustomoptionsArray.splice(index, 1);
    localStorage[config.data[0].storage_key+'_pNames'] = JSON.stringify(nameArray);
    localStorage[config.data[0].storage_key+'_pPrices'] = JSON.stringify(priceArray);
    localStorage[config.data[0].storage_key+'_pImages'] = JSON.stringify(imageArray);
    localStorage[config.data[0].storage_key+'_pQuantities'] = JSON.stringify(quantityArray);
    localStorage[config.data[0].storage_key+'_pTitles'] = JSON.stringify(title);
    try {
        localStorage[config.data[0].storage_key+'_pSizes'] = JSON.stringify(sizes);
        localStorage[config.data[0].storage_key+'_pColor'] = JSON.stringify(colors);
    }
    catch(err) {
        localStorage[config.data[0].storage_key+'_pSizes'] = '';
        localStorage[config.data[0].storage_key+'_pColor'] = '';
    }
    localStorage[config.data[0].storage_key+'_pIds'] = JSON.stringify(pIds);
    localStorage[config.data[0].storage_key+'_pnew_pro_data'] = JSON.stringify(pnew_pro_dataArray);
    localStorage[config.data[0].storage_key+'_pcustom_options'] = JSON.stringify(pcustomoptionsArray);
    
    if (config.data[0].platform=='ios' || config.data[0].platform=='android') {
        navigator.notification.alert(locale.message.alert["when_a_product_removed_from_cart"].replace("{{product}}", pname1),function (){},config.data[0].app_name, locale.message.button["close"]);
    }
    else{
        alert(locale.message.alert["when_a_product_removed_from_cart"].replace("{{product}}", pname1));
    }
    var totalShip = total=0,total_with_shipping;
    for(i=0;i<priceArray.length;i++) {
        total = total + (Number(priceArray[i])*Number(quantityArray[i]));
    }
    for(i=0;i<priceArray.length;i++) {
        //  totalShip = totalShip + (Number(shippingArray[i])*Number(quantityArray[i]));
    }
    total_with_shipping = total + totalShip ;
    localStorage[config.data[0].storage_key+'_totalAmount'] = total_with_shipping;
    localStorage[config.data[0].storage_key+'_TotalShipp'] = totalShip;
    total = parseFloat(total).toFixed(2);
    totalShip = parseFloat(totalShip).toFixed(2);
    total_with_shipping = parseFloat(total_with_shipping).toFixed(2);
    $("#totalAmount").html(app_curr_symbol+total+'');
    $("#shipping_detail").html(app_curr_symbol+totalShip+'');
    $("#total_with_shipping").html(app_curr_symbol+total_with_shipping+'');
    location.reload();
}
	   
	
	</script>
	

   </head>

    <body onLoad="onLoad()">
        <div data-role="page" id="mainpage">
            
			   
<!-- new code vipin start-->
            <div class="header-language-background fixed">
                 <div class="header-language-container">
	  
	         <div class="logoheader" style="display:none;">
            	<div class="freeshipping">
				  
						<p><a href="javascript:void(0)">Free shipping to Singapore on Orders of $150 or More</a></p>			   
			   </div>
            
				 <form id="srcfrm" name="serachForms" action="javascript:custom_search();">
					<div class="input-box">
						
						
						 <input id="searchFilter" type="serach" data-type="search" placeholder="Search entire store here..." data-theme="a" />
						
					
					     <ul id="suggestions" data-role="listview" data-inset="true" data-theme="a">
                                
                            </ul>
					</div>


				</form>
				
				
				
         </div>
        <!--<div class="store-language-container">
                    </div>-->

        
       <!-- <p class="welcome-msg">Default welcome msg! </p>-->
		
		     		 
		   <div class="skip-links">
		   
		   		  <div class="myact">
				       <a href="javascript:void(0)" id="loginbtn" class="skip-link skip-account">
					
					      <span class="label">LOGIN</span>
				      </a>
			
			          </div>
					
							<div id="header-account" style="display:none;" class="skip-content loginuser skip-active"><div class="caret"></div><div class="youama-login-window" style="display: block;">
								<div class="youama-window-outside">
								  
									<div class="youama-window-inside">
										<div class="youama-window-title">
											<h3>
												Sign In                    </h3>
										</div>
										
										<div class="youama-window-box first">
											<div class="youama-window-content">
												<div class="input-fly youama-showhideme">
													<label for="youama-email">Email <!--<span>*</span>--></label>
													<input type="text" id="username" name="username" value="">
													<div class="youama-ajaxlogin-error err-email err-noemail err-wrongemail err-wronglogin" style="display: none;"></div>
												</div>
												<div class="input-fly youama-showhideme">
													<label for="youama-password">Password <!--<span>*</span>--></label>
													<input type="password" id="password" name="password" value="">
													<div class="youama-ajaxlogin-error err-password err-dirtypassword err-nopassword err-longpassword" style="display: none;"></div>
												</div>
											</div>
										</div>
										
										<div class="youama-window-box last">
											<div class="youama-window-content box-contents box-contents-button youama-showhideme">
												<span class="youama-forgot-password">
													<a href="#">Forgot Password</a>
												</span>
												<button type="button" onclick="submitform()" class="button btn-proceed-checkout btn-checkout youama-ajaxlogin-button">
													<span>
														<span>Login</span>
													</span>
												</button>
											  
											</div>
										</div>
										
									</div>
								</div>
    </div><div class="youama-register-window" style="display: block;">
        <div class="youama-window-outside">
            <span class="close"></span>

            <div class="youama-window-inside">
                <div class="youama-window-title">
                    <h3>
                        Create an Account                    </h3>
                </div>

                <div class="youama-window-box first">
                   
                    <div class="youama-window-content">
                        <div class="input-fly youama-showhideme">
                            <label for="youama-firstname">Name <!--<span>*</span>--></label>
                            <input type="text" id="fullname" name="fullname" value="">
                            <div class="youama-ajaxlogin-error err-firstname err-nofirstname err-dirtyfirstname" style="display: none;"></div>
                        </div>
                        
                    </div>
                </div>

                <div class="youama-window-box second">
                  
                    <div class="youama-window-content">
                        <div class="input-fly youama-showhideme">
                            <label for="youama-email">Email <!--<span>*</span>--></label>
                            <input type="text" id="email" name="email" value="">
                            <div class="youama-ajaxlogin-error err-email err-noemail err-wrongemail err-emailisexist" style="display: none;"></div>
                        </div>
                        <div class="input-fly youama-showhideme">
                            <label for="youama-password">Password <!--<span>*</span>--></label>
                            <input type="password" id="rpassword" name="rpassword" value="">
                            <div class="youama-ajaxlogin-error err-password err-dirtypassword err-nopassword err-shortpassword err-longpassword" style="display: none;"></div>
                        </div>
                        <div class="input-fly youama-showhideme">
                            <label for="youama-passwordsecond">Confirm Password <!--<span>*</span>--></label>
                            <input type="password" id="cpassword" name="cpassword" value="">
                            <div class="youama-ajaxlogin-error err-passwordsecond err-nopasswordsecond err-notsamepasswords" style="display: none;"></div>
                        </div>
						
						<div class="input-fly youama-showhideme">
                            <label for="youama-invitationcode">Invitation Code (optional) <!--<span>*</span>--></label>
                            <input type="text" id="youama-invitationcode" name="youama-invitationcode" value="" autocomplete="OfF" autocorrect="off" autocapitalize="off">
                           
                        </div>
                       
                    </div>
                </div>

                <div class="youama-window-box last">
                    <div class="youama-window-content box-contents youama-showhideme">
                        <button id="rgsbtn" onclick="regsubmitform()" type="button" class="button btn-proceed-checkout btn-checkout youama-ajaxlogin-button">
                            <span><span>Register</span></span>
                        </button>
                       <!-- <p id="y-to-login" class="yoauam-switch-window">
                                                    </p>-->
                    </div>
					 <div class="input-fly input-fly-checkbox youama-showhideme">
                           <span style="display:none;"> <input type="checkbox" id="youama-licence" name="youama-licence" checked="checked" value="ok"></span>
                            <label for="youama-licence">By creating an account you agree to the <a href="https://eluvy.com/term-condition" target="_blank">Terms and Coditions</a></label>
                            <div class="youama-ajaxlogin-error err-nolicence" style="display: none;"></div>
                     </div>
                </div>

            </div>
        </div>
    </div><div class="youama-ajaxlogin-loader">
    </div>
	
	</div>   
						
		  
			
			<div class="contactus">
			  <span class="label"><a onclick="getCMSB(25)" href="javascript:void(0);">CONTACT US</a></span>
			</div>
			<div class="get20off">
			  <span class="label"><a class="slide-link" href="javascript:void(0)">Get 20% Off</a></span>
			  
			      <div class="mask" style="display:none;"></div>
			      <div class="slide email-signup row" id="email-signup" style="display: none;">
				     <div class="caret"></div>
						<div class="shell email-drawer-content">
						
						<div style="display:none" class="loader">
						<img alt="Please wait..." src="https://eluvy.com/media/custimg/medium.gif">
						<p class="h3">Please wait . . .</p>
						</div>
						<div style="display:none" class="success">
						<p>You're all signed up!</p>
						<p>(and your inbox just got a dose of sparkle)</p>
						<p>You'll be the first to hear about promotions, specials and the latest new arrivals.</p>
						<div class="load_on_success">
						
						</div>
						</div>
						<div>
						
						  <div class="closecontainer"><a href="javascript:void(0)" class="close"></a></div>
						  	
						<h2>Want to <em>score 20% off</em> your first purchase?</h2>
						<h3>Simply enter your email below and check your inbox for the promo code.</h3>
						  <div  id="newsletter-validate-detail" >
									   
           
                           <input type="email" class="input-text required-entry validate-email" title="Sign up for our newsletter" id="newsletteremail" name="email" spellcheck="false" placeholder="enter your email address" autocorrect="off" autocapitalize="off">
           
                          <button class="button" title="Subscribe" id="nwsbtn" type="button"><span><span>Sign Up</span></span></button>
                             <p><a title="No Thanks" type="reset" href="javascript:void(0)" class="exit-link">No Thanks</a></p>
                          </div>
					
					
						
						<p>Offer valid on full-price items and for first time customers only. See email for restrictions. By entering your email address, you will receive emails from Eluvy. You can unsubscribe at any time.</p>
						<div style="display:none" class="error">
						<p>We're sorry, there's been a problem with your request. Please try again.</p>
						</div>
						
						</div>
						<a class="exit-btn" href="#"><i class="fa fa-times"></i></a>
						</div>
                     </div>
			  
			</div>
			 <div class="header-minicart">
                

				<a href="javascript:void(0)" class="skip-link skip-cart  no-count">
				   
					<span class="label">Shopping Bag</span>
					  <span class="icon"></span>
					<span id="totalcount" class="count">0</span>
				</a>
			  
			<div id="header-cart" class="block block-cart skip-content" style="display:none;">
			      <div class="caret"></div>
				
			      <div id="minicart-error-message" class="minicart-message"></div>
			      <div id="minicart-success-message" class="minicart-message"></div>

				      <div id="minicart">
						  <div class="minicart-wrapper" >

							<p class="block-subtitle">
								Recently added item(s)     
								<a class="close skip-link-close" href="#" title="Close"></a>
							</p>

						    <p class="empty">You have no items in your shopping cart.</p>

					       </div>
				
			
			         </div>
			
			
			</div>


            </div>
			</div>

    </div>
	
	
	<script>
	
	 jQuery('.slide-link').click(function(){
	   
	     jQuery('#header-cart').hide();	
		  jQuery('#header-account').hide();	
		  
		 
		 if(jQuery('.slide').css('display') == 'none')
			{
						
                jQuery('.slide').slideDown(1000);
			     jQuery('.mask').show();
				 
			}else
			{
			     jQuery('.slide').slideUp(1000);	
				 jQuery('.mask').hide();
			}
		 
	 });
	 
	  jQuery('.exit-link, .close').click(function(){
		  
		     
		          jQuery('.slide').hide();	
				 jQuery('.mask').hide();
		 
	 });
	 
	 jQuery('.skip-account').click(function(){
		  
		     
			 
			 jQuery('#header-cart').hide();	
			  jQuery('.slide').hide();	
		  	
                if(jQuery('#header-account').css('display') == 'none')
					{
					
					    jQuery('#header-account').slideDown(1000);	

					}else{
					
					     jQuery('#header-account').slideUp(1000);	
					}			
		 
	 });
	 
	  jQuery('.close').click(function(){
		  
		    jQuery('#header-account').slideUp(1000);				 
		 
	 });
	 
	 	 jQuery('.skip-cart').click(function(){
		 
		  jQuery('#header-account').hide();	
		   jQuery('.slide').hide();	
		 
		    if(jQuery('#header-cart').css('display') == 'none')
					{
					
					  jQuery('#header-cart').slideDown(1000);	

					}else{
					
					     jQuery('#header-cart').slideUp(1000);	
					}
		  
		     			 
		 
	       });
	 
	
	
	
	</script>
	
	<script>
	
	jQuery('#nwsbtn').click(function(){
		
		jQuery('.success').hide();
		 if(jQuery('#newsletteremail').val()=='')
		 {
			 
			   jQuery('.success').show();
				
				jQuery('.success').html('<div class="error">Please Enter Email Id.</div>');
				
				return false;
				
		 }else
		 {
			 
			 if(!validatesEmail(jQuery('#newsletteremail').val()))
			 {
				 
				  jQuery('.success').show();
				
				 jQuery('.success').html('<div class="error">Please Enter Valid Email Id.</div>');
				
				 return false;
			 }
		 }
		 
		 jQuery.ajax(
				{
					url : 'https://eluvy.com/newsletter/subscriber/newajax/',
					type: "POST",
					data :  {'email':jQuery('#newsletteremail').val()},
					beforeSend: function(){	jQuery('.loader').show();},
					success:function(data, textStatus, jqXHR) 
					{
						
						jQuery('.loader').hide();
						
					
						var msg='';
						
						if(data.errorMsg!='')
						{
							
							msg='<div class="error">'+data.errorMsg+'</div>';
						}
						if(data.successMsg!='')
						{
							
							msg='<div class="success">'+data.successMsg+'</div>';
						}
						
						jQuery('.success').show();
						
						jQuery('.success').html(msg);
						
						
						
					},
					error: function(jqXHR, textStatus, errorThrown) 
					{
						//if fails      
					}
				});
	
	
		
	});
	   function validatesEmail(emailAddress) {
            var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

            if (filter.test(emailAddress)) {
                return true;
            } else {
                return false;
            }
        }
		
		
		jQuery('#searchFilter').click(function(){
		
		  $("#searchFilter").focus();
		
		});
		
		
		
	</script>
	
</div>
<!--  new code vipin end-->
		
             
			
            <div data-role="header" id="mainheader" class="mainheader" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="header">
                
                
                <div class="navigation_button">
                    <a href="#" class="fa fa-angle-left fa" onclick="back_click_new();">
                    </a>
                </div>
                <div class="navigation_menu_button menu-btn">
                    <a href="#" class="fa fa-bars fa">
                        
                    </a>
                </div>
                <div class="navigation_logo" align="center">
                    <a href="javascript:void(0);">
                        <img class="logo_icon" src="images/spin.gif" style="height:30px;width:30px;" />
                    </a>
                </div>
                
                <!--<div class="cart_search_container">
                 <div class="navigation_cart">
                 <a href="javascript:void(0);" onclick="redirectTopage('cart.html')">
                 <img class="cart_icon navigation_icon" src="images/themeicons/cart_32x32.png" onerror="this.onerror=null;this.src='images/cart.png'" />
                 <div class="cartamount">
                 <div class="cartNew" id="cartProducts">0</div>
                 </div>
                 </a>
                 </div>
                 
                 
                 <div class="navigation_search">
                 <a href="javascript:void(0);" id="search_btn"> <img src="images/search.png" class="navigation_icon">
                 </a>
                 </div>
                 </div>-->
                
                
                <div class="clear"></div>
                
                
                
                <div id="push-header" style="display:none">
                    <a href="javascript:hidePush();" style="float: right;margin: 5px 5px 5px 5px;background-color: transparent;width: 25px;height: 25px;border-radius: 100%;padding: 5px;background-image: url(images/dark/cross.png);background-position: center;background-size: 80% 80%;margin-right:5px;">&nbsp;</a>
                    <p id='push-msg' style='text-align:justify;font-weight:400;padding:0px 10px;line-height:17px;font-size:14px;width:95%'>&nbsp;</p>
                </div>
                
            </div>
            
            <div data-role="content">
                <div class="clear"></div>
                
                <div id="searchBox" class="searchbox" style="display:none;">
                    <form name="serachForm" action="javascript:custom_search();">
                        <div>
                            <input id="searchFilter" type="serach" data-type="search" placeholder="" data-theme="a" />
                            <ul id="suggestions" data-role="listview" data-inset="true" data-theme="a">
                                
                            </ul>
                        </div>
                    </form>
                </div>
                <div id="loginbox" class="loginbox myloginbox" style="padding:0px !important; margin-top:0px !important;" align="center">
                    <div id="myorder_msg" style="text-align:left;"></div>
                    <div id="myorder_content" style="text-align:left;">
                    </div>
                </div>
                <div class="clear"></div>
				
				
						    
             <div class="footer-container">
             <div class="footer1">
	           <div class="footer-newsletter">
     	
		        <div class="block block-subscribe">
                      <div style="display:none" class="loader">
							<img alt="Please wait..." src="https://eluvy.com/media/custimg/medium.gif">
							<p class="h3">Please wait . . .</p>
					   </div>
						<div style="display:none" class="success">
							<p>You're all signed up!</p>
							<p>(and your inbox just got a dose of sparkle)</p>
							<p>You'll be the first to hear about promotions, specials and the latest new arrivals.</p>
							<div class="load_on_success">
							
							</div>
						</div>
						<form action="https://eluvy.com//newsletter/subscriber/new/" method="post" id="newsletter-validate-detail">
							<div class="block-content">
								<div class="form-subscribe-header">
									<label for="newsletter">Sign Up for Our Newsletter:</label>
								</div>
								<div class="input-box">
								   <input type="email" autocapitalize="off" autocorrect="off" placeholder="enter your email address" spellcheck="false" name="email" id="newslettere" title="Sign up for our newsletter" class="input-text required-entry validate-email">
								</div>
								<div class="actions">
									<button type="button" title="Subscribe" id="newsbtn" class="button"><span><span>Sign Up</span></span></button>
								</div>
							</div>
                        </form>
	                   <div style="display:none" class="error">
						<p>We're sorry, there's been a problem with your request. Please try again.</p>
					    </div>
						<script>
						
						jQuery('#newsbtn').click(function(){
							
							jQuery('.success').hide();
							 if(jQuery('#newslettere').val()=='')
							 {
								 
								   jQuery('.success').show();
									
									jQuery('.success').html('<div class="error">Please Enter Email Id.</div>');
									
									return false;
									
							 }else
							 {
								 
								 if(!validatesEmail(jQuery('#newslettere').val()))
								 {
									 
									  jQuery('.success').show();
									
									 jQuery('.success').html('<div class="error">Please Enter Valid Email Id.</div>');
									
									 return false;
								 }
							 }
							 
							 jQuery.ajax(
									{
										url : 'https://eluvy.com/newsletter/subscriber/newajax/',
										type: "POST",
										data :  {'email':jQuery('#newslettere').val()},
										beforeSend: function(){	jQuery('.loader').show();},
										success:function(data, textStatus, jqXHR) 
										{
											
											jQuery('.loader').hide();
											
										
											var msg='';
											
											if(data.errorMsg!='')
											{
												
												msg='<div class="error">'+data.errorMsg+'</div>';
											}
											if(data.successMsg!='')
											{
												
												msg='<div class="success">'+data.successMsg+'</div>';
											}
											
											jQuery('.success').show();
											
											jQuery('.success').html(msg);
											
											
											
										},
										error: function(jqXHR, textStatus, errorThrown) 
										{
											//if fails      
										}
									});
						
						
							
						});
						   function validatesEmail(emailAddress) {
								var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;

								if (filter.test(emailAddress)) {
									return true;
								} else {
									return false;
								}
							}
							
							
                          
						</script>
						
						<script>
						
						 jQuery('.shopby').click(function(){
						 
						
						 if (jQuery('#menu1').css('display') == 'none' ){
						 
						         jQuery('#menu1').show();
								
							}else
							{
						      jQuery('#menu1').hide();
						     }
						 
						 })
						
						</script>
  
                </div>
                 <div class="clearfix"></div>
             </div><!--footer-newsletter-->
	 
	       <div class="footer-link-block" id="footer_link_block">
					
           </div>       
                <div class="clearfix"></div>
			<div class="footer-copyright" id="footer_coptright">
			
			
			</div><!--footer-copyright-->
       </div>
     </div>
                
				
				
            </div>
            <div data-role="footer" class="footer" data-position="fixed" data-tap-toggle="false" data-transition="none" data-id="footer">
            </div>
            
            
            <nav class="pushy pushy-left">
                <div id="Cate_slide">
                </div>
            </nav>
            <!-- Site Overlay -->
            <div class="site-overlay"></div>
            
        </div>
        <script type="text/javascript" src="js/footer.js"></script>
    </body>

</html>
